# 教育导航小程序

## 1.分区

首先将小程序页面大致分为三大块，分别是：搜索栏、分类栏和商品栏。

### a.搜索栏

第一要将天气和地点、地图和其图标居中。

```
display: flex;
justify-content:center;
align-items:center;
```

第二放置输入框，并布置其样式。

### b.分类栏

首先将各个图标和其说明包裹起来，同样居中，利用flex布局使其水平排列。

1.而后通过以下代码使其可以左右滑动。 [overflow标签](https://www.w3school.com.cn/cssref/pr_pos_overflow.asp)

```
style="overflow:auto"
```



```
style="overflow:auto"   //在wxml中
white-space: nowrap; 
display: flex；       //在wxss中
.view02::-webkit-scrollbar 
{display:none}     //用以隐藏滚动条
```

2.也可以采用**swiper组件**实现。[swiper组件](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html)

##### 设置滑块指示点样式

```
.类名 .wx-swiper-dot{

}                       //设置默认指示点的样式

.类名 .wx-swiper-dot.wx-swiper-dot-active{

}                       //设置选中的指示点的样式
```



### c.商品栏

将每一个商品栏包裹起来，并将其根据要求分为三块，分别是：图片、介绍和地图。其中地图通过<navigator>实现。同样采用flex布局。

## 2.分类栏吸顶

1.使用微信小程序自带组件[微信开放文件](https://developers.weixin.qq.com/miniprogram/dev/extended/component-plus/sticky.html#%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8)

2.使用粘性定位实现吸顶 

```
nav{
position:sticky;
top:0;    //吸顶时距离顶部的位置
}
```



## 3.一键回顶部

小程序开放文件有双击顶部回到顶部的关键字。[微信开放文件](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)

```
enable-back-to-top="true"  
```

但此处我们采用点击按钮回到顶部。

![image-20210728094835105](C:\Users\kEEpkind-\AppData\Roaming\Typora\typora-user-images\image-20210728094835105.png)

1.设置按键样式，并且按键应该是fixed固定定位。

2.在wxml中：

```
<button class="goTop" bindtap="goTop"           // 绑定一个事件
hidden="{{!showButton}}"                        //true为隐藏，false为显示 
>Top</button>
```

3.在js中：[微信开放文件](https://developers.weixin.qq.com/miniprogram/dev/api/ui/scroll/wx.pageScrollTo.html)

```
data: {
    tscrollTop:0,
    showButton:false,
  },                        //设置页面初始数据，刚开始showButton为false，因此按键隐藏
```

```
 onPageScroll:function (e) {      //页面事件监听
    if(e.scrollTop>100){      //当滚动条距离顶部大于100时，showButton为true，即按键不隐藏（显示）
      this.setData({
        showButton:true
      })
    }
    else{                    //否则，showButton照常为false，按键隐藏
      this.setData({
        showButton:false
      })
    }
    },
```

```
goTop:function (e) {       //回到顶部函数
    if(wx.pageScrollTo){         //微信小程序自带文件
      wx.pageScrollTo({
        duration: 0,            //指滚动动画的时长
        scrollTop:0             //滚动到的目标位置
      })
    }
    else{                  //????
      wx.showModal({
        cancelColor: '错误',
      })
    }
  },
```

注意：1.**function (e)**    e可以指代event

​           2.**this.setData**给data的value设值



## 4.按键按下改变商品排序

首先设置按键，利用flex布局进行美观。

通过以下代码可以实现按键按下后的样式。

```
button:hover{            //按键按下后的样式
  background-color: red;
}
```



## 5.用js添加“热度”标签

思路：利用css给每个特色课程设置一个hot，当满足某个条件时显示，不满足则隐藏。



## 6.按照距离排序

用order优先级可以实现？

1.先给所有的order设置一个初始值

2.给按键绑定一个事件

3.按键按下改变order值

4.view块会重新排列



存在问题：order不可以有小数，公里数则不能与order直接挂钩，需要设置条件。

解决方法：让所有距离初始单位为m，那么就可以根据order进行顺序排列；再进行m和km的转换（可以用三元运算符实现）；如果直接将order和距离挂钩，那么距离会随着按键按下发生改变，出现bug，这里我们采用的解决方法是：分别设置初始的距离和order值，当按下按钮时，触发事件，将距离的值赋给order。



```
// 按下“距离”按键时，将每个地点的距离赋值给order，以此来改变order的初始值
  disTance:function(e) {
    this.setData({
    prEss:true,
    dis3:this.data.kilo01,
    dis4:this.data.kilo02,
    dis5:this.data.kilo03,
    })
  },
```

```
<view class="view03" style="order:{{dis3}}">  //赋值order
```

```
<view>
<text class="oneDistance" wx:if="{{kilo01/1000<1}}">{{kilo01}}</text>
<text class="oneDistance" wx:if="{{kilo01/1000>=1}}">{{kilo01/1000}}</text>
<text class="oneDistance">{{kilo01>999? 'km':'m'}}</text>
</view>                        //距离大于999时，直接➗1000；且加上单位km；
                                 距离小于999时，输出初始值；加上单位m。
```



## 7.按照热度排序

与“按照距离排序”思路相同，用CSS给每一个特色科目前都加一个火，当热度大于某一个值的时候显示出来，

```
wx:if="{{hot091>=10}}
```

将三个科目的热度相加，得到总热度可以根据order排序，因为要使热度高的排在前面，所以在order赋值时加上负号。

```
hOt:function (e) {
  this.setData({
    hot01:this.data.hot011+this.data.hot012+this.data.hot013,
    hot02:this.data.hot021+this.data.hot022+this.data.hot023,
    hot03:this.data.hot031+this.data.hot032+this.data.hot033,
    hot04:this.data.hot041+this.data.hot042+this.data.hot043,
    hot05:this.data.hot051+this.data.hot052+this.data.hot053,
    hot06:this.data.hot061+this.data.hot062+this.data.hot063,
    hot07:this.data.hot071+this.data.hot072+this.data.hot073,
    hot08:this.data.hot081+this.data.hot082+this.data.hot083,
    hot09:this.data.hot091+this.data.hot092+this.data.hot093,
    dis3:-this.data.hot01,
    dis4:-this.data.hot02,
    dis5:-this.data.hot03,
    dis6:-this.data.hot04,
    dis7:-this.data.hot05,
    dis8:-this.data.hot06,
    dis9:-this.data.hot07,
    dis10:-this.data.hot08,
    dis11:-this.data.hot09,
    })
},
```



## 8.默认排序

一个hot +10分

每多100m -10分

具体如下：

```
var kilonumber01=this.data.kilo01;
  var totalnew01=0;
  var score01=(kilonumber01-kilonumber01%100)/100*10;
  var totalnumber01=this.data.total01;
  totalnew01=totalnumber01+score01;
  //热度的加减分
  if(this.data.hot011>=10){
    totalnew01=totalnew01+10;
  }
  if(this.data.hot012>=10){
    totalnew01=totalnew01+10;
  }
  if(this.data.hot013>=10){
    totalnew01=totalnew01+10;
  }
```

